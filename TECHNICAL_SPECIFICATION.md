
# Техническое задание: Менеджер паролей

**Студент:** Потапов Владислав Сергеевич

**Группа:** 2307в1

---

## 1. Описание проекта

### 1.1 Название системы
**Менеджер паролей**

### 1.2 Назначение
Система предназначена для удобного и безопасного хранения, генерации и управления паролями пользователей.
Основная цель — обеспечить конфиденциальность и защиту данных с помощью шифрования и авторизации по мастер-паролю.
Приложение облегчает работу с множеством учетных записей, позволяя хранить их централизованно и безопасно.

---

## 2. Функциональные требования

### 2.1 Основные функции системы

#### Функция 1: Запись пароля
- **Описание:** Позволяет пользователю сохранять новые учетные данные (название, логин/почта, пароль, URL(необязательно), категория(необязательно)) в зашифрованное хранилище. Данные шифруются с использованием мастер-пароля и ключа шифрования.
- **Входные данные:** Название сервиса, логин/почта, пароль, URL?, категория?
- **Результат:** Новая запись добавлена в базу данных. Пользователь получает подтверждение успешного добавления.

#### Функция 2: Поиск и фильтрация паролей
- **Описание:** Позволяет быстро находить нужную запись по названию, логину, URL или категории.
- **Входные данные:** Поисковой запрос, фильтр (категория, дата добавления...)
- **Результат:** Список записей, удовлетворяющих условиям поиска.

#### Функция 3: Просмотр и расшифровка паролей
- **Описание:** Отображает сохраненные учетные данные после ввода мастер-пароля.
- **Входные данные:** мастер-пароль
- **Результат:** Отображается информации о записях (пароли скрыты)

#### Функция 4: Редактирование записи
- **Описание:** Позволяет изменять существующие учетные данные (название, логин, пароль, URL, категория).
- **Входные данные:** Изменённые данные записи
- **Результат:** Запись обновлена в базе данных, информация зашифрована заново.

#### Функция 5: Удаление записи
- **Описание:** Позволяет удалить выбранную запись из хранилища.
- **Входные данные:** Идентификатор записи
- **Результат:** Запись удалена, отображается обновлённый список.       

#### Функция 6: аутентификация
- **Описание:** При запуске приложения пользователь вводит мастер-пароль, который используется для расшифровки хранилища. Без него доступ невозможен.
- **Входные данные:** мастер-пароль
- **Результат:** доступ к данным

#### Функция 7: Генерация пароля
- **Описание:** Автоматически создает случайный, безопасный пароль на основе выбранных параметров (длина, наличие символов, цифр, регистра).
- **Входные данные:** длинна, наличие символов, наличие цифр, регистр.
- **Результат:** Сгенерированный пароль, соответствующий заданным параметрам.

#### Функция 8: Оплата подписки
- **Описание:** Пользователь может оплатить годовую или месячную подписку на использование менеджера паролей. Выбирает тариф, вводит данные банковской карты (номер, срок действия, CVV). Система проверяет корректность данных, создаёт запись о платеже и, при успешной оплате, автоматически продлевает срок действия подписки.
- **Входные данные:** выбранный тариф, данные карты
- **Результат:** Платёж обработан, подписка продлена, создана запись в БД

---

## 3. Структура базы данных

### Таблица 1: Entries (Записи)

**Описание:** Хранит записи

**Поля:**
- `Id` (int, PK) — уникальный идентификатор записи
- `Name` (string) — название записи
- `Username` (string) — имя пользователя
- `Password` (string) — пароль (шифр.)
- `Email` (string) — Электронная почта  
- `CategoryId` (int?, FK) — ссылка на таблицу Categories  
- `URL` (string) — URL страницы 
- `AddingDate` (DateTime) — дата добавления записи

**Связи:**
- `EmailId` → **Emails.Id** (многие к одному) 
- `CategoryId` → **Categories.Id** (многие к одному) 
- `URLId` → **URLs.Id** (многие к одному)


### Таблица 2: Catgories (Категории)

**Описание:** Хранит названия категорий

**Поля:**
- `Id` (int, PK) — уникальный идентификатор категории
- `Category` (string) — категория

**Связи:**
- 1 → N с таблицей **Entries**


### Таблица 3: Payments (Оплаты)

**Описание:** Хранит названия категорий

**Поля:**
- `Id` (int, PK) — уникальный идентификатор платежа
- `Tariff` (string) — Тип подписки (месячная, годовая)
- `Amount` (decimal) — Сумма платежа
- `Date` (DateTime) — Дата оплаты
- `Status` (string) — Статус оплаты

---

## 4. Основные формы приложения

#### Форма 1: LoginWindow (Окно входа)

**Назначение:** Авторизация пользователя и ввод мастер-пароля для расшифровки базы данных.

**Элементы управления:**
- TextBox (ввод пароля) — поле для ввода мастер-пароля  
- Button "Войти" — проверка введённого пароля и вход в систему  
- Button "Создать мастер-пароль" — открывает окно регистрации, если пароль ещё не создан  
- Label (сообщения) — отображает результат проверки (успех/ошибка)

**Действия:**
- Кнопка "Войти" — проверяет мастер-пароль и открывает главное окно при успешной аутентификации  
- Кнопка "Создать мастер-пароль" — создаёт новый зашифрованный ключ доступа и инициализирует хранилище  

---

#### Форма 2: MainWindow (Главная форма)

**Назначение:** Основное окно приложения для управления сохранёнными паролями.

**Элементы управления:**
- DataGrid — отображает список сохранённых записей (название, логин, категория, дата)  
- TextBox (поиск) — поле для поиска записей по названию или логину  
- ComboBox (фильтр категорий) — фильтрация по выбранной категории  
- Button "Добавить" — открывает окно добавления записи  
- Button "Редактировать" — редактирование выбранной записи  
- Button "Удалить" — удаляет выбранную запись  
- Button "Показать пароль" — временно раскрывает пароль  
- MenuBar — доступ к настройкам и оплате подписки

**Действия:**
- Кнопка "Добавить" — открывает AddEditWindow для добавления новой записи  
- Кнопка "Редактировать" — открывает AddEditWindow с выбранной записью  
- Кнопка "Удалить" — удаляет выбранную запись после подтверждения  
- Кнопка "Показать пароль" — расшифровывает и отображает пароль на короткое время  
- Меню "Настройки" — открывает SettingsWindow  
- Меню "Подписка" — открывает PaymentWindow  

---

#### Форма 3: AddEditWindow (Добавление/редактирование записи)

**Назначение:** Добавление новой или изменение существующей записи с паролем.

**Элементы управления:**
- TextBox "Название" — название сервиса  
- TextBox "Логин/Email" — логин или адрес электронной почты  
- PasswordBox "Пароль" — поле для ввода пароля  
- TextBox "URL" — адрес сайта (необязательно)  
- ComboBox "Категория" — выбор категории записи  
- Button "Сгенерировать пароль" — открывает генератор  
- Button "Сохранить" — сохраняет запись в БД  
- Button "Отмена" — закрывает окно без сохранения  

**Действия:**
- Кнопка "Сгенерировать пароль" — открывает PasswordGeneratorWindow  
- Кнопка "Сохранить" — шифрует и добавляет (или обновляет) запись  
- Кнопка "Отмена" — закрывает окно без изменений  

---

#### Форма 4: PasswordGeneratorWindow (Генератор паролей)

**Назначение:** Создание безопасного случайного пароля по заданным параметрам.

**Элементы управления:**
- TextBox (длина пароля) — ввод желаемой длины  
- CheckBox "Цифры" — включение чисел в пароль  
- CheckBox "Заглавные буквы" — включение букв верхнего регистра  
- CheckBox "Спецсимволы" — добавление специальных символов  
- Button "Сгенерировать" — создаёт пароль  
- TextBox (результат) — отображает готовый пароль  
- Button "Копировать" — копирует результат в буфер обмена  

**Действия:**
- Кнопка "Сгенерировать" — создаёт пароль согласно выбранным параметрам  
- Кнопка "Копировать" — копирует пароль для вставки в другое окно  

---

#### Форма 5: PaymentWindow (Окно оплаты)

**Назначение:** Оплата подписки для активации дополнительных функций приложения.

**Элементы управления:**
- ComboBox "Тариф" — выбор подписки (месяц / год)  
- TextBox "Номер карты" — ввод номера банковской карты  
- TextBox "Срок действия" — срок действия карты  
- TextBox "CVV" — защитный код  
- Button "Оплатить" — подтверждение и обработка платежа  
- Label (результат) — отображает статус оплаты  

**Действия:**
- Кнопка "Оплатить" — проверяет корректность данных, создаёт запись о платеже и активирует подписку  
- Кнопка "Отмена" — закрывает окно без оплаты  

---

#### Форма 6: SettingsWindow (Настройки)

**Назначение:** Управление параметрами приложения и безопасностью.

**Элементы управления:**
- Button "Сменить мастер-пароль" — открывает форму смены пароля  
- CheckBox "Тёмная тема" — переключает оформление  
- TextBox "Путь к базе данных" — отображает текущий путь хранения  
- Button "Обзор" — выбор новой директории  
- Button "Сохранить" — применение изменений  

**Действия:**
- Кнопка "Сменить мастер-пароль" — позволяет задать новый пароль шифрования  
- Кнопка "Сохранить" — сохраняет настройки приложения  
- Кнопка "Обзор" — выбирает новую директорию базы данных  

---

## 5. Схема переходов между формами

**Текстовое описание:**

1. **Запуск приложения** → [LoginWindow]  
    - Пользователь вводит мастер-пароль.  
    - Если пароль введён верно → переход в [MainWindow]  
    - Если пароль неверный → сообщение об ошибке, остаётся в [LoginWindow]  
    - Если мастер-пароль ещё не создан → кнопка "Создать мастер-пароль" открывает форму регистрации  

2. **[LoginWindow]** → [MainWindow]  
   - После успешной аутентификации пользователь попадает в главное окно с записями.  

3. **[MainWindow]** → (доступные переходы)
   - Кнопка **"Добавить"** → [AddEditWindow] (добавление новой записи)  
   - Кнопка **"Редактировать"** → [AddEditWindow] (редактирование выбранной записи)  
   - Кнопка **"Показать пароль"** → раскрытие зашифрованного пароля (без перехода на другую форму)  
   - Кнопка **"Удалить"** → удаление записи (с подтверждением)  
   - Меню **"Настройки"** → [SettingsWindow]  
   - Меню **"Генератор паролей"** → [PasswordGeneratorWindow]  
   - Меню **"Подписка"** → [PaymentWindow]  

4. **[AddEditWindow]** → (после действий)
   - Кнопка **"Сохранить"** → сохраняет запись и возвращает на [MainWindow]  
   - Кнопка **"Отмена"** → отменяет изменения и возвращает на [MainWindow]  
   - Кнопка **"Сгенерировать пароль"** → открывает [PasswordGeneratorWindow]  

5. **[PasswordGeneratorWindow]** →  
   - После генерации пароля пользователь может скопировать его и вернуться на [AddEditWindow]  

6. **[PaymentWindow]** →  
   - После успешной оплаты → отображается подтверждение и возврат в [MainWindow]  

7. **[SettingsWindow]** →  
   - После сохранения настроек или отмены → возврат в [MainWindow]  

### Схема навигации

#### При запуске приложения
**Запуск** → `LoginWindow` (ввод мастер-пароля)

#### Из LoginWindow
**Кнопка "Войти"** → проверка введённого мастер-пароля  
Если пароль верен → `MainWindow` (главное окно)  
Если неверен → сообщение об ошибке, остаёмся на `LoginWindow`

**Кнопка "Создать мастер-пароль"** → создание нового мастер-пароля → `MainWindow`

---

#### Из MainWindow
**Секция "Пароли":**
- Кнопка "Добавить" → `AddEditWindow` (режим создания)
- Кнопка "Редактировать" (выбрана запись) → `AddEditWindow` (режим редактирования)
- Кнопка "Удалить" → диалог подтверждения → удаление, остаёмся на `MainWindow`
- Кнопка "Показать пароль" → расшифровка и временное отображение пароля (без перехода)

**Секция "Инструменты":**
- Меню "Генератор паролей" → `PasswordGeneratorWindow`
- Меню "Настройки" → `SettingsWindow`

**Секция "Подписка":**
- Меню "Оплатить подписку" → `PaymentWindow`
- Показ информации о текущей подписке

---

#### Из AddEditWindow
**Кнопка "Сохранить"** → шифрование и сохранение записи → возврат на `MainWindow` (обновить список)  
**Кнопка "Отмена"** → возврат на `MainWindow` без сохранения  
**Кнопка "Сгенерировать пароль"** → переход в `PasswordGeneratorWindow`

---

#### Из PasswordGeneratorWindow
**Кнопка "Сгенерировать"** → создание пароля по параметрам  
**Кнопка "Копировать"** → копирование в буфер обмена  
**Кнопка "Закрыть"** → возврат в `AddEditWindow`

---

#### Из PaymentWindow
**Кнопка "Оплатить"** → проверка данных и выполнение транзакции
 - Успешная оплата → сообщение об успехе → возврат на `MainWindow`  
 - Ошибка → сообщение об ошибке, остаёмся на `PaymentWindow` 

**Кнопка "Отмена"** → возврат на `MainWindow` без оплаты

---

#### Из SettingsWindow
**Кнопка "Сменить мастер-пароль"** → ввод нового пароля → обновление ключа шифрования  
**Кнопка "Сохранить"** → применение настроек → возврат на `MainWindow`  
**Кнопка "Отмена"** → возврат на `MainWindow` без сохранения изменений
